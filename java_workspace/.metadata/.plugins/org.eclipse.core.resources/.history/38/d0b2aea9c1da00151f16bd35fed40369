<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project name="PluginBase" default="dist" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant">
	<import file="${basedir}/common-targets.xml" as="common" />

	<!-- Set variables for build directories -->
	<property name="major.minor" value="1.3" />
	<property name="jar.name" value="opkey-pluginbase-${major.minor}.jar" />
	<property name="debuglevel" value="source,lines,vars" />

	<path id="project.classpath">
		<fileset dir="lib" includes="*.jar" />
	</path>

	<target name="dist" depends="common.compile, common.find_revision">

		<echo message="creating jar of the plugin" />
		<property name="base.version" value="${major.minor}.0.${svn-version}" />

		<jar destfile="build/${jar.name}" basedir="bin">
			<manifest>
				<attribute name="Built-By" value="${user.name}" />
				<attribute name="Built-Date" value="${TODAY}" />

				<attribute name="Specification-Title" value="OpKey Plugin" />
				<attribute name="Specification-Vendor" value="CresTech" />

				<attribute name="Implementation-Title" value="OpKey Plugin Base" />
				<attribute name="Implementation-Version" value="${base.version}" />
				<attribute name="Implementation-Vendor" value="CresTech" />

				<attribute name="Class-Path" value="sqlite-jdbc-3.7.2.jar javautil-3.1.1.jar asm-all-3.1.jar">
				</attribute>

			</manifest>
		</jar>

		<!-- now copy all the dependencies -->
		<echo message="Copying all the necessary libraries and files" />
		<copy todir="build">
			<fileset dir="lib" />
		</copy>

		<echo>Base jar:       ${jar.name}</echo>
		<echo>Base Version:   ${base.version}</echo>

	</target>

</project>